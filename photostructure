#!/usr/bin/env node
/* Copyright © 2019, PhotoStructure Inc. <https://photostructure.com/eula> */
module.exports=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=331)}({0:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(33);function i(n,e,t){return null==n||null==e?void 0:t(n,e)}function o(n,e){return null!=n?n:r.isFunction(e)?e():e}function u(n){return null!=n}e.map=function(n,e){return null==n?void 0:e(n)},e.map2=i,e.orElse=o,e.mapOr=function(n,e,t){return null==n?t():e(n)},e.map2Or=function(n,e,t,r){return o(i(n,e,t),r)},e.defined=u,e.allDefined=function(n){return null!=n&&n.every(u)},e.firstDefined=function(...n){return n.find(u)},e.denull=function(n){return null==n?void 0:n}},1:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(2),i=t(89),o=t(182),u=t(49),c=t(0),l=t(67),s=t(22),f=t(8);function a(n){return o.isList(n)&&n.length>0&&n.some(n=>null!=n)}function p(n){return!a(n)}function y(n){return l.isPrimitive(n)||l.isPrimitiveArray(n)?n:n.valueOf()}function d(n,e=[]){return null==n?e:(n.forEach(n=>c.map(n,n=>Array.isArray(n)?d(n,e):e.push(n))),e)}function m(n,e){const t=n.map((n,t)=>({ea:n,cmp:d([e(n),t])})).sort((n,e)=>l.cmp(n.cmp,e.cmp));for(let e=0;e<n.length;e++)n[e]=t[e].ea;return n.length=t.length,n}function b(n,e){return s.toA(n).filter(n=>null!=n).map((n,t)=>({ea:n,cmp:d([e(n),t])})).filter(n=>null!=n.cmp).sort((n,e)=>l.cmp(n.cmp,e.cmp)).map(n=>n.ea)}function g(n,e){return null!=n&&null!=e&&n.length===e.length&&n.every((n,t)=>n===e[t])}function h(n,e){if(null==n)return!1;for(const t of n)if(e===t)return!0;return!1}function v(n){if(null==n)return[];const e=s.toA(n);return e.every(c.defined)?e:e.filter(c.defined)}e.isNotEmpty=a,e.isEmpty=p,e.mapNotEmpty=function(n,e){return a(n)?e(n):void 0},e.flatten=d,e.sort=function(n){return m(v(n),y)},e.sortByInPlace=m,e.sorted=function(n){return n.every((e,t)=>0===t||e>n[t-1])},e.sortBy=b,e.deepSortBy=function n(e,t){return b(e,t).map(e=>i.isIterable(e)?n(e,t):e)},e.arrayEql=g,e.startsWith=function(n,e){return g(n.slice(0,e.length),e)},e.filterInPlace=function(n,e){for(let t=0;t<n.length;)e(n[t],t,n)?t++:n.splice(t,1);return n},e.includes=h,e.indexOf=function(n,e){if(null==n)return;let t=0;for(const r of n){if(e(r,t))return t;t++}},e.includesAll=function(n,e){return null!=n&&null!=e&&e.every(e=>h(n,e))},e.pushUniq=function(n,e){return h(n,e)||n.push(e),n},e.compact=v;const O=["null","undefined"];function j(n,e){if(p(n))return[];const t=new Map;return n.forEach(n=>u.getOrSet(t,e(n),()=>n)),[...t.values()]}e.compactBlankish=function(n){return s.toA(n).filter(n=>r.notBlank(n)&&!O.includes(f.toS(n)))},e.compactBlanks=function(n){return null==n?[]:n.map(n=>f.toS(n).trim()).filter(n=>n.length>0)},e.uniq=function(n){return j(v(n),n=>JSON.stringify(n))},e.uniqBy=j,e.clear=function(n){return n.length=0,n},e.count=function(n,e){return n.reduce((n,t,r)=>n+(e(t,r)?1:0),0)},e.sum=function(n,e){return n.reduce((n,t)=>n+e(t),0)},e.firstMatch=function(n,e){for(const t of v(e)){const e=n.exec(t);if(null!=e)return e}},e.commonPrefixLength=function(n,e){if(null==n||null==e)return 0;if(n===e)return n.length;if("string"==typeof n&&(n=n.split("")),"string"==typeof e&&(e=e.split("")),g(n,e))return n.length;let t=0;for(;n[t]===e[t];)t++;return t}},126:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(127);e.descriptionFooter="Please visit <https://support.photostructure.com/> for detailed usage and configuration instructions.\n\nCopyright © 2019, PhotoStructure Inc.\n\nRunning this software indicates your agreement to all the terms of this license: <https://photostructure.com/eula>",e.CliDesc={main:"Launches PhotoStructure. Manages web and sync services.",info:"File metadata and import diagnostics tool.",logtail:"View the log messages of currently-running PhotoStructure processes. (Like `tail -f`).",web:"Web service. Automatically started by main.",sync:"Directory synchronization service. Automatically started by main.",syncFile:"File synchronization service. Automatically started by sync."},e.addFooter=function(n){return n.on("--help",()=>{console.log("\n"+r.wrap(e.descriptionFooter,{maxLineLen:78,prefix:""}).join("\n")+"\n")})}},127:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(1),i=t(8);function o(n,e){return n=i.toS(n),e=i.toS(e),n.startsWith(e)?n:e+n}e.ensurePrefix=o,e.ensureSuffix=function(n,e){return n=i.toS(n),e=i.toS(e),n.endsWith(e)?n:n+e},e.newlineRe=/\r?\n/gm,e.wrap=function n(t,u={maxLineLen:75,prefix:""}){if(t.includes("\n"))return r.flatten(t.split(e.newlineRe).map(e=>n(e,u)));if((t=o(i.toS(t).trim(),u.prefix)).length<=u.maxLineLen)return[t.trim()];const c=t.slice(0,u.maxLineLen+1).replace(/[\s-]/g," ").lastIndexOf(" "),l=c<=1?u.maxLineLen-(u.prefix.length+2):c;return[t.slice(0,l+1).trim(),...n(t.slice(l+1),u)]}},180:function(n,e){("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"0.6.3-beta.6+20191211202234"}},181:function(n,e){n.exports=require("commander")},182:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(33);e.isList=function(n){return null!=n&&(Array.isArray(n)||isFinite(n.length)&&r.isFunction(n[Symbol.iterator])&&r.isFunction(n.push)&&r.isFunction(n.pop)&&r.isFunction(n.forEach)&&r.isFunction(n.some))}},19:function(n,e){n.exports=require("process")},2:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(0),i=t(22),o=t(8);function u(n){if(null==n)return!0;const e=o.toS(n);return 0===e.length||0===e.trim().length}function c(n){return!u(n)}function l(n,e){if(!1===n||null==n||""===n)return;const t=o.toS(n);return c(t)?e(t):void 0}e.blank=u,e.notBlank=c,e.ifNotBlank=function(n){if(null==n)return;const e=o.toS(n);return 0===e.length||0===e.trim().length?void 0:e},e.notBlankOr=function(n,e){if(null==n)return e;const t=o.toS(n).trim();return t.length>0?t:e},e.notBlankAnd=function(n,e){return!u(n)&&e(n)},e.mapNotBlank=l,e.mapNotBlankOr=function(n,e,t){return r.orElse(l(n,e),t)},e.firstNotBlank=function(...n){return i.toA(n).find(n=>c(n))}},22:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(89);e.toA=function(n){return null==n?[]:r.isIterable(n)?Array.from(n):Array.isArray(n)?n:[n]}},33:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(89),i=t(67);var o;function u(n){return"symbol"==typeof n}function c(n){return"function"==typeof n}function l(n){return null==n?o.Empty:u(n)?o.Symbol:i.isPrimitive(n)?o.Primitive:Array.isArray(n)?o.Array:r.isIterable(n)?o.Iterable:c(n)?o.Function:"object"==typeof n?n.constructor&&"Object"===n.constructor.name?o.Object:o.Instance:o.Unknown}!function(n){n[n.Empty=0]="Empty",n[n.Primitive=1]="Primitive",n[n.Symbol=2]="Symbol",n[n.Object=3]="Object",n[n.Array=4]="Array",n[n.Iterable=5]="Iterable",n[n.Instance=6]="Instance",n[n.Function=7]="Function",n[n.Unknown=8]="Unknown"}(o=e.ObjectType||(e.ObjectType={})),e.isSymbol=u,e.isFunction=c,e.isObject=function(n){return l(n)===o.Object},e.objectType=l},331:function(n,e,t){t(180),n.exports=t(332)},332:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(181),i=t(19),o=t(51),u=t(126);u.addFooter(r.version(o.version).description("PhotoStructure™, your new home for all your photos and videos.")).command("main",u.CliDesc.main,{isDefault:!0,executableFile:"bin/main.js"}).command("info",u.CliDesc.info,{executableFile:"bin/info.js"}).command("logtail",u.CliDesc.logtail,{executableFile:"bin/logtail.js"}).command("web",u.CliDesc.web,{executableFile:"bin/web.js"}).command("sync",u.CliDesc.sync,{executableFile:"bin/sync.js"}).command("sync-file",u.CliDesc.syncFile,{executableFile:"bin/sync-file.js"}).parse(i.argv)},49:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOrSet=function(n,e,t){if(null==e)throw new Error("null key");if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),r}}},51:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="0.6.3-beta.6",e.release="0.6.3-beta.6+20191211202234",e.gitSha="0943ac08b9ce9520373575b5bee631b713ccb4a2",e.gitDate=new Date(1576095754e3)},67:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t(1),i=["number","string","boolean"];function o(n){return-1!==i.indexOf(typeof n)}function u(n,e){return null==n&&null==e?0:null==n?-1:null==e?1:"string"==typeof n&&"string"==typeof e?n.localeCompare(e):Array.isArray(n)&&Array.isArray(e)?c(n,e):n>e?1:n<e?-1:0}function c(n,e){if(r.isEmpty(n)&&r.isEmpty(e))return 0;const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const t=u(n[r],e[r]);if(0!==t)return t}return u(n.length,e.length)}e.isPrimitive=o,e.isPrimitiveArray=function(n){return Array.isArray(n)&&n.every(o)},e.cmp=u,e.cmpArr=c},8:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toS=function n(e){return null==e?"":"string"==typeof e?e:Array.isArray(e)?e.map(n).join(","):e.toString()}},89:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=function(n){return null!=n&&"string"!=typeof n&&"function"==typeof n[Symbol.iterator]}}});